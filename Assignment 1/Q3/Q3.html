<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ER/EER Diagram Builder</title>
    <link rel="stylesheet" href="Q3.css">
</head>
<body>
    <div class="header">
        <h1>ðŸ“Š ER/EER Diagram Builder</h1>
        <div class="toolbar">
            <button class="btn" onclick="generateSchema()">Generate Schema</button>
            <button class="btn btn-secondary" onclick="clearCanvas()">Clear Canvas</button>
            <button class="btn btn-danger" onclick="deleteSelected()">Delete Selected</button>
            <button class="btn" onclick="showHowToUse()">How to Use</button>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <h3>ðŸŽ¨ Tools</h3>
            <!-- Update the tool items -->
            <div class="tool-item" draggable="true" data-type="entity">
                <i>ðŸ“¦</i> Entity
            </div>
            <div class="tool-item" draggable="true" data-type="attribute-simple">
                <i>âšª</i> Simple Attribute
            </div>
            <div class="tool-item" draggable="true" data-type="attribute-composite">
                <i>âšªâšª</i> Composite Attribute
            </div>
            <div class="tool-item" draggable="true" data-type="attribute-derived">
                <i>âšª</i> Derived Attribute
            </div>
            <div class="tool-item" draggable="true" data-type="attribute-multivalued">
                <i>âšªâšª</i> Multivalued Attribute
            </div>
            <div class="tool-item" draggable="true" data-type="relationship">
                <i>â—†</i> Relationship
            </div>
        </div>

        <div class="canvas-container">
            <svg id="connectionsSvg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;"></svg>
            <div id="canvas"></div>
        </div>
    </div>

    <!-- Entity Modal -->
    <div id="entityModal" class="modal">
        <div class="modal-content">
            <h2>Configure Entity</h2>
            <div class="form-group">
                <label>Entity Name:</label>
                <input type="text" id="entityName" placeholder="e.g., Student, Course">
            </div>
            <div class="form-group">
                <label>Attributes (comma-separated):</label>
                <input type="text" id="entityAttributes" placeholder="e.g., id, name, age">
            </div>
            <div class="form-group">
                <label>Primary Key:</label>
                <input type="text" id="entityPK" placeholder="e.g., id">
            </div>
            <div class="btn-group">
                <button class="btn" onclick="saveEntity()">Save</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Attribute Modal -->
    <div id="attributeModal" class="modal">
        <div class="modal-content">
            <h2>Configure Attribute</h2>
            <div class="form-group">
                <label>Attribute Name:</label>
                <input type="text" id="attributeName" placeholder="e.g., firstName, salary">
            </div>
            <div class="form-group">
                <label>Properties:</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="attrKey"> Primary Key</label>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn" onclick="saveAttribute()">Save</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Relationship Modal -->
    <div id="relationshipModal" class="modal">
        <div class="modal-content">
            <h2>Configure Relationship</h2>
            <div class="form-group">
                <label>Relationship Name:</label>
                <input type="text" id="relationshipName" placeholder="e.g., Enrolls, Works_For">
            </div>
            <div class="form-group">
                <label>Entity 1:</label>
                <select id="entity1Select"></select>
            </div>
            <div class="form-group">
                <label>Cardinality (Entity 1):</label>
                <select id="cardinality1">
                    <option value="1">1 (One)</option>
                    <option value="N">N (Many)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Participation (Entity 1):</label>
                <select id="participation1">
                    <option value="partial">Partial</option>
                    <option value="total">Total</option>
                </select>
            </div>
            <div class="form-group">
                <label>Entity 2:</label>
                <select id="entity2Select"></select>
            </div>
            <div class="form-group">
                <label>Cardinality (Entity 2):</label>
                <select id="cardinality2">
                    <option value="1">1 (One)</option>
                    <option value="N">N (Many)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Participation (Entity 2):</label>
                <select id="participation2">
                    <option value="partial">Partial</option>
                    <option value="total">Total</option>
                </select>
            </div>
            <div class="btn-group">
                <button class="btn" onclick="saveRelationship()">Save</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Schema Modal -->
    <div id="schemaModal" class="modal">
        <div class="modal-content">
            <h2>Generated Relational Schema</h2>
            <div id="schemaOutput" class="schema-output"></div>
            <div class="btn-group">
                <button class="btn" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- How to Use Modal -->
    <div id="howToUseModal" class="modal">
        <div class="modal-content">
            <h2>How to Use</h2>
            <p>Welcome to the ER/EER Diagram Builder! Here's how you can use this tool:</p>
            <ul>
                <li><strong>Drag and Drop:</strong> Drag tools from the sidebar onto the canvas to create entities, attributes, and relationships.</li>
                <li><strong>Configure Elements:</strong> Click on an element to configure its properties, such as name, attributes, and keys.</li>
                <li><strong>Move Elements:</strong> Drag elements on the canvas to reposition them.</li>
                <li><strong>Generate Schema:</strong> Click "Generate Schema" to create the relational schema based on your diagram.</li>
                <li><strong>Clear Canvas:</strong> Use "Clear Canvas" to reset the workspace.</li>
                <li><strong>Delete Selected:</strong> Select an element and click "Delete Selected" to remove it.</li>
            </ul>
            <div class="btn-group">
                <button class="btn" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- FAB -->
    <div class="fab-container">
        <button class="fab" onclick="toggleFabMenu()">+</button>
        <div class="fab-menu">
            <button class="fab-item" onclick="generateSchema()">Generate Schema</button>
            <button class="fab-item" onclick="clearCanvas()">Clear Canvas</button>
            <button class="fab-item" onclick="deleteSelected()">Delete Selected</button>
            <button class="fab-item" onclick="showHowToUse()">How to Use</button>
        </div>
    </div>

    <!-- Dark mode toggle -->
    <div class="dark-mode-toggle">
        <label>
            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
            Dark Mode
        </label>
    </div>

    <script src="Q3.js"></script>
</body>
</html>
